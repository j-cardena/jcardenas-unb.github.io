<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Current Openings | Julian Cardenas Barrera</title>
    <meta name="description" content="Research positions available in smart grid technologies, power systems optimization, and renewable energy integration at UNB.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:opsz,wght@8..60,400;8..60,600;8..60,700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --color-bg: #fafafa;
            --color-bg-alt: #ffffff;
            --color-text: #1a1a2e;
            --color-text-muted: #4a4a68;
            --color-accent: #0066cc;
            --color-accent-dark: #004999;
            --color-energy: #00a676;
            --color-border: #e8e8ed;
            --font-serif: 'Source Serif 4', Georgia, serif;
            --font-sans: 'DM Sans', -apple-system, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            background: var(--color-bg);
            color: var(--color-text);
            line-height: 1.7;
            font-size: 17px;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0,102,204,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,102,204,0.03) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none;
            z-index: -1;
        }

        a {
            color: var(--color-accent);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        a:hover {
            color: var(--color-accent-dark);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(250, 250, 250, 0.92);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--color-border);
            z-index: 100;
            padding: 16px 0;
        }

        nav .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-name {
            font-family: var(--font-serif);
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--color-text);
        }

        .nav-links {
            display: flex;
            gap: 32px;
            list-style: none;
        }

        .nav-links a {
            color: var(--color-text-muted);
            font-size: 0.95rem;
            font-weight: 500;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--color-accent);
            transition: width 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--color-text);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-links a.active {
            color: var(--color-accent);
        }

        .nav-links a.active::after {
            width: 100%;
        }

        /* Page Header */
        .page-header {
            padding: 140px 0 60px;
            background: var(--color-bg-alt);
            border-bottom: 1px solid var(--color-border);
        }

        .page-header h1 {
            font-family: var(--font-serif);
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .page-header p {
            font-size: 1.1rem;
            color: var(--color-text-muted);
            max-width: 600px;
        }

        /* Main Content */
        main {
            padding: 60px 0;
        }

        /* Job Posting Cards */
        .job-posting {
            background: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 36px;
            margin-bottom: 32px;
            transition: all 0.3s ease;
        }

        .job-posting:hover {
            box-shadow: 0 12px 40px rgba(0,0,0,0.08);
            transform: translateY(-2px);
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 20px;
            margin-bottom: 20px;
        }

        .job-title {
            font-family: var(--font-serif);
            font-size: 1.4rem;
            font-weight: 600;
            line-height: 1.3;
        }

        .job-type {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 8px 14px;
            border-radius: 20px;
            white-space: nowrap;
            background: rgba(0, 166, 118, 0.12);
            color: var(--color-energy);
        }

        .job-project {
            font-size: 0.95rem;
            color: var(--color-accent);
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--color-border);
        }

        .job-section {
            margin-bottom: 20px;
        }

        .job-section-title {
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-text-muted);
            margin-bottom: 8px;
        }

        .job-section p {
            color: var(--color-text);
            line-height: 1.7;
        }

        .job-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
            padding-top: 20px;
            border-top: 1px solid var(--color-border);
            margin-top: 24px;
        }

        .job-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--color-text-muted);
        }

        .job-meta-item svg {
            flex-shrink: 0;
        }

        .job-apply {
            margin-top: 28px;
        }

        .job-apply a {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--color-accent);
            color: white;
            padding: 14px 28px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .job-apply a:hover {
            background: var(--color-accent-dark);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,102,204,0.3);
        }

        /* No Openings State */
        .no-openings {
            text-align: center;
            padding: 60px 40px;
            background: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: 12px;
        }

        .no-openings h2 {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            margin-bottom: 16px;
            color: var(--color-text);
        }

        .no-openings p {
            color: var(--color-text-muted);
            margin-bottom: 24px;
        }

        /* General Interest Box */
        .general-interest {
            margin-top: 60px;
            padding: 40px;
            background: linear-gradient(135deg, var(--color-accent) 0%, #0055aa 100%);
            border-radius: 12px;
            color: white;
        }

        .general-interest h2 {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            margin-bottom: 16px;
        }

        .general-interest p {
            opacity: 0.9;
            margin-bottom: 12px;
            line-height: 1.7;
        }

        .general-interest ul {
            margin: 20px 0;
            padding-left: 24px;
            opacity: 0.9;
        }

        .general-interest li {
            margin-bottom: 8px;
        }

        .general-interest a {
            color: white;
            text-decoration: underline;
        }

        .general-interest a:hover {
            color: rgba(255,255,255,0.8);
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 60px;
            color: var(--color-text-muted);
        }

        /* Footer */
        footer {
            padding: 40px 0;
            text-align: center;
            color: var(--color-text-muted);
            font-size: 0.9rem;
            border-top: 1px solid var(--color-border);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .page-header {
                padding: 120px 0 40px;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .job-header {
                flex-direction: column;
            }

            .job-meta {
                flex-direction: column;
                gap: 12px;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .job-posting {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="container">
            <a href="index.html" class="nav-name">Julian Cardenas Barrera</a>
            <ul class="nav-links">
                <li><a href="index.html#research">Research</a></li>
                <li><a href="index.html#projects">Projects</a></li>
                <li><a href="index.html#publications">Publications</a></li>
                <li><a href="index.html#team">Team</a></li>
                <li><a href="jobs.html" class="active">Opportunities</a></li>
                <li><a href="index.html#contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Page Header -->
    <header class="page-header">
        <div class="container">
            <h1>Current Openings</h1>
            <p>Join our research group working on smart grid technologies, renewable energy integration, and power systems optimization.</p>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <div id="jobs-loading" class="loading">
                Loading positions...
            </div>
            
            <div id="jobs-container">
                <!-- Dynamically populated from jobs.xlsx -->
            </div>

            <div id="no-openings" class="no-openings" style="display: none;">
                <h2>No Current Openings</h2>
                <p>We don't have any funded positions available at the moment, but we're always interested in hearing from motivated researchers.</p>
            </div>

            <!-- Always show general interest section -->
            <div class="general-interest">
                <h2>Interested in Future Opportunities?</h2>
                <p>Even if there are no current openings that match your profile, we welcome inquiries from motivated students and researchers interested in:</p>
                <ul>
                    <li>Power systems optimization and control</li>
                    <li>Machine learning for energy applications</li>
                    <li>Renewable energy integration and forecasting</li>
                    <li>Smart grid communications and cybersecurity</li>
                    <li>Electric vehicle grid integration (V2G)</li>
                </ul>
                <p>
                    <strong>Prospective graduate students:</strong> Review the <a href="https://www.unb.ca/gradstudies/admissions/" target="_blank">UNB graduate admissions requirements</a> and send your CV and research interests to <a href="mailto:jcardena@unb.ca">jcardena@unb.ca</a>.
                </p>
                <p>
                    <strong>Postdoctoral researchers:</strong> If you have external funding (e.g., NSERC PDF, Banting, Marie Curie) or are interested in applying for funding together, please get in touch.
                </p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>¬© 2025 Julian Cardenas Barrera ¬∑ University of New Brunswick ¬∑ <a href="index.html">Back to main site</a></p>
        </div>
    </footer>

    <!-- SheetJS library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <script>
        async function loadJobs() {
            try {
                const response = await fetch('jobs.xlsx');
                if (!response.ok) throw new Error('Jobs file not found');
                
                const arrayBuffer = await response.arrayBuffer();
                const workbook = XLSX.read(arrayBuffer, { type: 'array' });
                
                const sheetName = workbook.SheetNames[0];
                const worksheet = workbook.Sheets[sheetName];
                const data = XLSX.utils.sheet_to_json(worksheet);
                
                renderJobs(data);
            } catch (error) {
                console.error('Error loading jobs:', error);
                document.getElementById('jobs-loading').style.display = 'none';
                document.getElementById('no-openings').style.display = 'block';
            }
        }

        function renderJobs(data) {
            const container = document.getElementById('jobs-container');
            const loading = document.getElementById('jobs-loading');
            const noOpenings = document.getElementById('no-openings');
            
            // Filter only open positions
            const openJobs = data.filter(job => 
                job['Status'] && job['Status'].toLowerCase() === 'open'
            );
            
            loading.style.display = 'none';
            
            if (openJobs.length === 0) {
                noOpenings.style.display = 'block';
                return;
            }
            
            let html = '';
            openJobs.forEach((job, index) => {
                const title = job['Title'] || 'Research Position';
                const type = job['Position Type'] || '';
                const project = job['Project'] || '';
                const description = job['Description'] || '';
                const requirements = job['Requirements'] || '';
                const startDate = job['Start Date'] || '';
                const deadline = job['Application Deadline'] || '';
                const funding = job['Funding Source'] || '';
                
                html += `
                    <article class="job-posting" style="animation-delay: ${index * 0.1}s">
                        <div class="job-header">
                            <h2 class="job-title">${escapeHtml(title)}</h2>
                            ${type ? `<span class="job-type">${escapeHtml(type)}</span>` : ''}
                        </div>
                        
                        ${project ? `<div class="job-project">üìÅ ${escapeHtml(project)}</div>` : ''}
                        
                        ${description ? `
                        <div class="job-section">
                            <div class="job-section-title">About the Position</div>
                            <p>${escapeHtml(description)}</p>
                        </div>
                        ` : ''}
                        
                        ${requirements ? `
                        <div class="job-section">
                            <div class="job-section-title">Requirements</div>
                            <p>${escapeHtml(requirements)}</p>
                        </div>
                        ` : ''}
                        
                        <div class="job-meta">
                            ${startDate ? `
                            <div class="job-meta-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                    <line x1="3" y1="10" x2="21" y2="10"/>
                                </svg>
                                Start: ${escapeHtml(startDate)}
                            </div>
                            ` : ''}
                            
                            ${deadline ? `
                            <div class="job-meta-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                </svg>
                                Deadline: ${escapeHtml(deadline)}
                            </div>
                            ` : ''}
                            
                            ${funding ? `
                            <div class="job-meta-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                </svg>
                                ${escapeHtml(funding)}
                            </div>
                            ` : ''}
                        </div>
                        
                        <div class="job-apply">
                            <a href="mailto:jcardena@unb.ca?subject=Application: ${encodeURIComponent(title)}">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                    <polyline points="22,6 12,13 2,6"/>
                                </svg>
                                Apply Now
                            </a>
                        </div>
                    </article>
                `;
            });
            
            container.innerHTML = html;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        document.addEventListener('DOMContentLoaded', loadJobs);
    </script>
</body>
</html>
